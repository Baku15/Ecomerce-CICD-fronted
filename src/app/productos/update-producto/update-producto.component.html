<div class="container py-2">
  <h2 class="mb-5">Modificar producto</h2>
  <div class="row justify-content-center">
    <form [formGroup]="productoForm" (ngSubmit)="updateProduct()" class="col-md-6">
      <div class="file-upload-container mb-3">
        <label class="file-upload-label">
          <span>Select a file</span>
          <input type="file" id="fileInput" (change)="onFileSelected($event)" name="file" hidden>
          <mat-icon>attach_file</mat-icon>
        </label>
        <div *ngIf="selectedFile || productoForm.value.imageUrl" class="image-preview">
          <img [src]="imagePreview ? imagePreview : productoForm.value.imageUrl" alt="Product image" class="preview-image">
        </div>
      </div>
      <div class="row">
        <div class="col-md-6">
          <mat-form-field class="mb-3">
            <mat-label class="label-width">Nombre</mat-label>
            <input matInput placeholder="Nombre" formControlName="nombre">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="mb-3">
            <mat-label class="label-width">Descripción</mat-label>
            <input matInput placeholder="Descripción" formControlName="descripcion">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="mb-3">
            <mat-label class="label-width">Precio</mat-label>
            <input matInput type="number" placeholder="Precio" formControlName="precio" step="1" min="0">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="mb-3">
            <mat-label class="label-width">Stock</mat-label>
            <input matInput type="number" placeholder="Stock" formControlName="stock" step="1" min="0">
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="mb-3">
            <mat-label class="label-width">Marca</mat-label>
            <mat-select formControlName="marca" name="marca">
              <mat-option *ngFor="let marca of listOfMarcas" [value]="marca.id">{{ marca.nombre }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <mat-form-field class="mb-3">
            <mat-label class="label-width">Categoría</mat-label>
            <mat-select formControlName="categorias" name="categorias">
              <mat-option *ngFor="let categoria of listOfCategorias" [value]="categoria.idCategoria">{{ categoria.categoria }}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      <div class="button-container">
        <button mat-button color="warn" routerLink="/admin/registro-producto" class="mr-2">Cancelar</button>
        <button mat-raised-button color="primary" type="submit" [disabled]="productoForm.invalid">Modificar producto</button>
      </div>
    </form>
  </div>
</div>

